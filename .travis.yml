language: java

# clone "travis" branch containing deployment settings
before_install: git clone -b travis https://github.com/daisy-consortium/maven-parents.git target/travis

# main task, run the verify goal
script: mvn verify

# if the build succeeds, deploy the artifact (tests are skipped)
after_success: mvn deploy -DskipTests -Dinvoker.skip=true --settings target/travis/settings.xml

# whitelist; only deploy master branch
branches:
  only:
  - master

env:
  global:
    - secure: "PtxRXo1wzFd4EKBEeR+DVeCz0jrtB8zPAzr2cYoHJoa+2gZnzLi8WvhbsJiIKeMytcFt0rDDexcVwkkJl8wn+5DWndxxScdg0my/I1Eye23DwuctIhB6Z7uCvQ2En/N2vJ7yO/XduXMUX04xwgKheGTt4vntpMNdCWLC+jWbSzY="
    - secure: "W6iuVCVmqyk6nIYBdv+dYFrhIp0jIpz9OYqi/L8MnHtsiCXqIUx6GcGNtb3Ki7HwNCUDpKzV1D5Pfo1P62lvKO93Li601e/VuYrE23tDozpYiWEdoHymeQxUBvcY/k3wDpeH4Qr1PdEJpiFhLgQwR9RjC1T6pq0YxhZfrj0kHIE="